<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>M2H Admin Panel â€” macOS Style</title>

<!-- Tailwind -->
<script src="https://cdn.tailwindcss.com"></script>

<!-- Lucide Icons -->
<script src="https://unpkg.com/lucide@latest"></script>

<!-- Chart.js -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<style>
    body {
        background: #f2f3f5;
        color: #1e1e1e;
        font-family: system-ui, -apple-system, BlinkMacSystemFont;
        animation: fadeIn .25s ease-in-out;
    }
    @keyframes fadeIn { from {opacity: 0} to {opacity: 1} }

    .sidebar-btn {
        display: flex;
        align-items: center;
        gap: 12px;
        padding: 10px 14px;
        border-radius: 10px;
        transition: .15s;
        font-size: 15px;
        color: #444;
    }
    .sidebar-btn:hover { background: #e9eaee; }
    .sidebar-btn.active {
        background: #dfe7ff;
        color: #1d4ed8;
        border-left: 4px solid #3b82f6;
    }

    .card {
        background: white;
        border-radius: 12px;
        border: 1px solid #e5e7eb;
        padding: 18px;
        box-shadow: 0 2px 4px rgba(0,0,0,.03);
    }

    .admin-section { display: none; }
</style>
</head>

<body>

<!-- ================= LOGIN SCREEN ================= -->
<div id="login-screen" class="fixed inset-0 bg-white flex items-center justify-center z-50">
    <div class="card w-11/12 sm:w-96">
        <h1 class="text-2xl font-bold text-center mb-4">Admin Login</h1>

        <input id="admin-key-input"
               class="w-full p-3 border border-gray-300 rounded-xl mb-3"
               type="password" placeholder="Enter Admin Key" />

        <p id="login-error" class="hidden text-red-600 text-sm mb-3"></p>

        <button onclick="loginAdmin()" 
            class="w-full py-3 bg-blue-600 text-white rounded-xl hover:bg-blue-700 transition">
            Sign In
        </button>
    </div>
</div>

<!-- ================= MAIN LAYOUT ================= -->
<div id="admin-panel" class="hidden h-screen flex overflow-hidden">

    <!-- SIDEBAR (macOS style) -->
    <aside class="hidden lg:flex flex-col w-72 bg-white border-r border-gray-200 p-6 space-y-1">
        <h1 class="text-xl font-bold mb-5">M2H Admin</h1>

        <button id="nav-dashboard" class="sidebar-btn active" onclick="switchTab('dashboard')">
            <i data-lucide="layout-dashboard"></i> Dashboard
        </button>

        <button id="nav-requests" class="sidebar-btn" onclick="switchTab('requests')">
            <i data-lucide="list"></i> Requests
        </button>

        <button id="nav-videos" class="sidebar-btn" onclick="switchTab('videos')">
            <i data-lucide="video"></i> Videos
        </button>

        <button id="nav-monitor" class="sidebar-btn" onclick="switchTab('monitor')">
            <i data-lucide="activity"></i> Monitoring
        </button>

        <button id="nav-logs" class="sidebar-btn" onclick="switchTab('logs')">
            <i data-lucide="file-text"></i> Logs
        </button>

        <button id="nav-tools" class="sidebar-btn" onclick="switchTab('tools')">
            <i data-lucide="settings"></i> Tools
        </button>

        <button onclick="logoutAdmin()" 
            class="mt-auto py-3 bg-red-500 text-white rounded-xl hover:bg-red-600 flex items-center justify-center gap-2">
            <i data-lucide="log-out"></i> Logout
        </button>
    </aside>

    <!-- MOBILE HEADER -->
    <header class="lg:hidden fixed inset-x-0 top-0 bg-white p-4 border-b flex justify-between items-center z-50">
        <button id="mobile-menu-toggle" 
        title="Toggle Sidebar"
        class="p-2 bg-gray-200 rounded-lg">
    <i data-lucide="menu"></i>
</button>

        <h1 class="text-lg font-semibold">M2H Admin</h1>
        <span id="mobile-current-time" class="text-gray-600 text-sm">--:--:--</span>
    </header>

    <!-- MOBILE SIDEBAR -->
    <aside id="mobile-sidebar"
        class="fixed inset-y-0 left-0 w-72 bg-white border-r border-gray-200 p-6 transform -translate-x-full transition z-50 lg:hidden">

        <nav class="space-y-1 mt-8">
            <button id="mobile-nav-dashboard" class="sidebar-btn active" onclick="switchTab('dashboard')">
                <i data-lucide="layout-dashboard"></i> Dashboard
            </button>

            <button id="mobile-nav-requests" class="sidebar-btn" onclick="switchTab('requests')">
                <i data-lucide="list"></i> Requests
            </button>

            <button id="mobile-nav-videos" class="sidebar-btn" onclick="switchTab('videos')">
                <i data-lucide="video"></i> Videos
            </button>

            <button id="mobile-nav-monitor" class="sidebar-btn" onclick="switchTab('monitor')">
                <i data-lucide="activity"></i> Monitoring
            </button>

            <button id="mobile-nav-logs" class="sidebar-btn" onclick="switchTab('logs')">
                <i data-lucide="file-text"></i> Logs
            </button>

            <button id="mobile-nav-tools" class="sidebar-btn" onclick="switchTab('tools')">
                <i data-lucide="settings"></i> Tools
            </button>
        </nav>

        <button onclick="logoutAdmin()" 
            class="mt-10 py-3 bg-red-500 text-white rounded-xl hover:bg-red-600 flex items-center justify-center gap-2">
            <i data-lucide="log-out"></i> Logout
        </button>
    </aside>

    <!-- ================= MAIN CONTENT ================= -->
    <main class="flex-1 overflow-y-auto p-6 mt-16 lg:mt-0 space-y-8">

        <!-- DASHBOARD -->
        <section id="section-dashboard" class="admin-section">
            <h2 class="text-2xl font-bold mb-4">Dashboard</h2>

            <div class="grid sm:grid-cols-2 lg:grid-cols-3 gap-4">
                <div class="card">
                    <p>Total Requests</p>
                    <h1 id="stat-total-requests" class="text-3xl mt-2">0</h1>
                </div>
                <div class="card">
                    <p>Total Videos</p>
                    <h1 id="stat-total-videos" class="text-3xl mt-2">0</h1>
                </div>
                <div class="card">
                    <p>Active Users</p>
                    <h1 id="stat-active-users" class="text-3xl mt-2">0</h1>
                </div>
            </div>

            <div class="grid lg:grid-cols-2 gap-4 mt-4">
                <div class="card">
                    <h3 class="font-medium mb-3">Requests / Hour</h3>
                    <canvas id="chart-requests" height="220"></canvas>
                </div>

                <div class="card">
                    <h3 class="font-medium mb-3">Device Types</h3>
                    <canvas id="chart-devices" height="220"></canvas>
                </div>
            </div>
        </section>

        <!-- REQUESTS -->
        <section id="section-requests" class="admin-section hidden">
            <h2 class="text-2xl font-bold mb-4">Requests</h2>

            <button onclick="clearRequests()"
                class="mb-4 px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600">
                Clear All Requests
            </button>

            <div class="card overflow-x-auto">
                <table class="w-full text-sm">
                    <thead class="border-b">
                        <tr>
                            <th class="p-3">IP</th>
                            <th class="p-3">Device</th>
                            <th class="p-3">Browser</th>
                            <th class="p-3">Platform</th>
                            <th class="p-3">URL</th>
                            <th class="p-3">Time</th>
                        </tr>
                    </thead>
                    <tbody id="table-requests"></tbody>
                </table>
            </div>
        </section>

        <!-- VIDEOS -->
        <section id="section-videos" class="admin-section hidden">
            <h2 class="text-2xl font-bold mb-4">Videos</h2>

            <button onclick="clearVideos()"
                class="mb-4 px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600">
                Clear All Videos
            </button>

            <div class="card overflow-x-auto">
                <table class="w-full text-sm">
                    <thead class="border-b">
                        <tr>
                            <th class="p-3">ID</th>
                            <th class="p-3">Author</th>
                            <th class="p-3">Downloads</th>
                            <th class="p-3">Date</th>
                        </tr>
                    </thead>
                    <tbody id="table-videos"></tbody>
                </table>
            </div>
        </section>

        <!-- MONITOR -->
        <section id="section-monitor" class="admin-section hidden">
            <h2 class="text-2xl font-bold mb-4">Monitoring</h2>

            <div class="grid sm:grid-cols-2 lg:grid-cols-3 gap-4">
                <div class="card"><p>Uptime</p><h1 id="mon-uptime" class="text-2xl mt-2">--</h1></div>
                <div class="card"><p>RPS</p><h1 id="mon-rps" class="text-2xl mt-2">--</h1></div>
                <div class="card"><p>Latency</p><h1 id="mon-latency" class="text-2xl mt-2">--</h1></div>
                <div class="card"><p>Event Lag</p><h1 id="mon-eventlag" class="text-2xl mt-2">--</h1></div>
                <div class="card"><p>RAM</p><h1 id="mon-ram" class="text-2xl mt-2">--</h1></div>
                <div class="card"><p>CPU</p><h1 id="mon-cpu" class="text-2xl mt-2">--</h1></div>
            </div>

            <h3 class="text-xl font-semibold mt-6 mb-3">External Pings</h3>

            <div class="grid sm:grid-cols-2 lg:grid-cols-3 gap-4">
                <div class="card"><p>Google</p><h1 id="mon-google" class="text-xl mt-2">--</h1></div>
                <div class="card"><p>Cloudflare</p><h1 id="mon-cloudflare" class="text-xl mt-2">--</h1></div>
                <div class="card"><p>Twitter</p><h1 id="mon-twitter" class="text-xl mt-2">--</h1></div>
            </div>
        </section>

        <!-- LOGS -->
        <section id="section-logs" class="admin-section hidden">
            <h2 class="text-2xl font-bold mb-4">Logs</h2>

            <div id="logs-box" class="card h-80 overflow-y-auto text-sm">
                Loading logs...
            </div>
        </section>

        <!-- TOOLS -->
        <section id="section-tools" class="admin-section hidden">
            <h2 class="text-2xl font-bold mb-4">Admin Tools</h2>

            <div class="space-y-4">

                <!-- Ban IP -->
                <div class="card space-y-3">
                    <h3 class="text-lg font-semibold">Ban IP</h3>
                    <input id="ban-ip-input"
                        class="w-full p-3 border border-gray-300 rounded-lg"
                        placeholder="Enter IP Address">
                    <button onclick="banIP()"
                        class="px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600">
                        Ban IP
                    </button>
                </div>

                <!-- Reset Stats -->
                <div class="card space-y-3">
                    <h3 class="text-lg font-semibold">Reset Statistics</h3>
                    <button onclick="resetStats()"
                        class="px-4 py-2 bg-yellow-500 text-white rounded-lg hover:bg-yellow-600">
                        Reset Stats
                    </button>
                </div>

                <!-- Clear Requests -->
                <div class="card space-y-3">
                    <h3 class="text-lg font-semibold">Clear All Requests</h3>
                    <button onclick="clearRequests()"
                        class="px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600">
                        Clear Requests
                    </button>
                </div>

                <!-- Clear Videos -->
                <div class="card space-y-3">
                    <h3 class="text-lg font-semibold">Clear All Videos</h3>
                    <button onclick="clearVideos()"
                        class="px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600">
                        Clear Videos
                    </button>
                </div>

            </div>
        </section>

    </main>
</div>

<script>
lucide.createIcons();

// mobile menu toggle
document.getElementById("mobile-menu-toggle").onclick = () => {
    document.getElementById("mobile-sidebar").classList.toggle("-translate-x-full");
};

// live time
setInterval(()=>{
    document.getElementById("mobile-current-time").innerText = new Date().toLocaleTimeString();
},1000);
</script>

<script src="admin.js"></script>

</body>
</html>
